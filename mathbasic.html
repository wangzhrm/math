<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Math Vocabulary Learning & Quiz</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      margin: 0;
      padding: 20px;
      background: #f9f9f9;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
    }
    h1 {
      color: #2c3e50;
    }
    .page { display: none; }
    .active { display: block; }

    /* Buttons */
    button {
      margin: 10px;
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #3498db;
      color: white;
    }
    button:hover {
      background: #2980b9;
    }
    .btn-red { background: #e74c3c; }
    .btn-red:hover { background: #c0392b; }

    /* Flashcard */
    .flashcard {
      width: 90%;
      height: 200px;
      margin: 30px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .flashcard:hover {
      transform: scale(1.02);
    }

    /* Quiz Options */
    .options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin: 20px auto;
      max-width: 600px;
    }
    .option {
      padding: 15px;
      background: #ecf0f1;
      border-radius: 8px;
      cursor: pointer;
      font-size: 20px;
      transition: background 0.2s;
    }
    .option:hover {
      background: #d5dbdb;
    }
    .wrong { background-color: #fadbd8 !important; }
    .correct { background-color: #d5f5e3 !important; }

    /* Results */
    .mistakes-list {
      text-align: left;
      margin: 20px auto;
      padding: 15px;
      background: #fef9e7;
      border-radius: 8px;
      max-width: 600px;
    }
    .mistakes-list li {
      margin: 8px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Home Page -->
    <div id="home" class="page active">
      <h1>üìö Math Vocabulary System</h1>
      <p>Choose your mode:</p>
      <button onclick="startMode('learn')">üìñ Learning Mode</button>
      <button onclick="startMode('quiz')">‚ùì Quiz Mode</button>
    </div>

    <!-- Learning Mode -->
    <div id="learning" class="page">
      <h2>Learning Mode</h2>
      <div id="learnProgress"></div>
      <div class="flashcard" id="learnCard" onclick="flipCard()"></div>
      <div>
        <button onclick="prevCard()">‚óÄ Previous</button>
        <button onclick="nextCard()">Next ‚ñ∂</button>
      </div>
    </div>

    <!-- Quiz Mode -->
    <div id="quiz" class="page">
      <h2>Quiz Mode</h2>
      <div id="quizProgress"></div>
      <div class="flashcard" id="quizTerm"></div>
      <div class="options" id="quizOptions"></div>
    </div>

    <!-- Results -->
    <div id="results" class="page">
      <h2>üéâ Quiz Completed!</h2>
      <p>Your score: <strong id="scoreDisplay"></strong></p>
      <div id="mistakesSection" style="display:none;">
        <h3>You got these wrong:</h3>
        <ul class="mistakes-list" id="mistakesList"></ul>
      </div>
      <button onclick="goHome()">üè† Back to Home</button>
    </div>
  </div>

  <script>
    // === DATA ===
    const rawData = `
üìò 0. Symbols (Â∏∏ËßÅÁ¨¶Âè∑)
=	equals	Á≠â‰∫é
‚âà	approximately equal	Á∫¶Á≠â‰∫é
>	greater than	Â§ß‰∫é
<	less than	Â∞è‰∫é
‚â•	greater than or equal to	Â§ß‰∫éÁ≠â‰∫é
‚â§	less than or equal to	Â∞è‰∫éÁ≠â‰∫é
¬±	plus or minus	Ê≠£Ë¥ü
‚àë	summation	Ê±ÇÂíå
‚àö	square root	Âπ≥ÊñπÊ†π
x	x	x
‚àà	belongs to	Â±û‰∫é
‚àâ	does not belong to	‰∏çÂ±û‰∫é
‚àÄ	for all	ÂØπÊâÄÊúâ
‚àÉ	there exists	Â≠òÂú®
‚Üí	implies / tends to	Ëï¥Âê´ / Ë∂ãÂêë
‚àû	infinity	Êó†Á©∑Â§ß

üìò 1. General Vocabulary (Âü∫Á°ÄËØçÊ±á)
number	Êï∞
integer	Êï¥Êï∞
rational number	ÊúâÁêÜÊï∞
irrational number	Êó†ÁêÜÊï∞
real number	ÂÆûÊï∞
complex number	Â§çÊï∞
prime number	Ë¥®Êï∞
composite number	ÂêàÊï∞
factor / divisor	Âõ†Êï∞ / Èô§Êï∞
multiple	ÂÄçÊï∞
greatest common factor (GCF)	ÊúÄÂ§ßÂÖ¨Âõ†Êï∞
least common multiple (LCM)	ÊúÄÂ∞èÂÖ¨ÂÄçÊï∞
even number	ÂÅ∂Êï∞
odd number	Â•áÊï∞
sequence	Êï∞Âàó
term	È°π
variable	ÂèòÈáè
constant	Â∏∏Êï∞
coefficient	Á≥ªÊï∞
expression	Ë°®ËææÂºè
equation	ÊñπÁ®ã
formula	ÂÖ¨Âºè
identity	ÊÅíÁ≠âÂºè
ratio	ÊØî
proportion	ÊØî‰æã
percentage	ÁôæÂàÜÊØî

üìò 2. Algebra (‰ª£Êï∞)
simplify	ÂåñÁÆÄ
expand	Â±ïÂºÄ
factorise	Âõ†ÂºèÂàÜËß£
polynomial	Â§öÈ°πÂºè
quadratic	‰∫åÊ¨°ÁöÑ
quadratic equation	‰∫åÊ¨°ÊñπÁ®ã
root / solution	Ê†π / Ëß£
discriminant	Âà§Âà´Âºè
linear equation	‰∏ÄÊ¨°ÊñπÁ®ã
simultaneous equations	ËÅîÁ´ãÊñπÁ®ã
inequality	‰∏çÁ≠âÂºè
absolute value equation	ÁªùÂØπÂÄºÊñπÁ®ã
substitution	‰ª£ÂÖ•
elimination method	Ê∂àÂÖÉÊ≥ï
rearrange	ÈáçÊéí
solve	Ëß£

üìò 3. Functions (ÂáΩÊï∞)
function	ÂáΩÊï∞
mapping	Êò†Â∞Ñ
domain	ÂÆö‰πâÂüü
range	ÂÄºÂüü
inverse function	ÂèçÂáΩÊï∞
composite function	Â§çÂêàÂáΩÊï∞
one-to-one (injective)	ÂçïÂ∞Ñ
onto (surjective)	Êª°Â∞Ñ
even function	ÂÅ∂ÂáΩÊï∞
odd function	Â•áÂáΩÊï∞
piecewise function	ÂàÜÊÆµÂáΩÊï∞

üìò 4. Coordinate Geometry (ÂùêÊ†áÂá†‰Ωï)
coordinate	ÂùêÊ†á
Cartesian plane	Á¨õÂç°Â∞îÂπ≥Èù¢
x-axis / y-axis	xËΩ¥ / yËΩ¥
origin	ÂéüÁÇπ
gradient (slope)	ÊñúÁéá
y-intercept	yÊà™Ë∑ù
x-intercept	xÊà™Ë∑ù
straight line	Áõ¥Á∫ø
curve	Êõ≤Á∫ø
tangent	ÂàáÁ∫ø
normal	Ê≥ïÁ∫ø
distance formula	Ë∑ùÁ¶ªÂÖ¨Âºè
midpoint	‰∏≠ÁÇπ

üìò 5. Trigonometry (‰∏âËßíÂ≠¶)
angle	Ëßí
degree (¬∞)	Â∫¶
radian	ÂºßÂ∫¶
sine (sin)	Ê≠£Âº¶
cosine (cos)	‰ΩôÂº¶
tangent (tan)	Ê≠£Âàá
opposite	ÂØπËæπ
adjacent	‰∏¥Ëæπ
hypotenuse	ÊñúËæπ
Pythagorean theorem	ÂãæËÇ°ÂÆöÁêÜ
trigonometric identity	‰∏âËßíÊÅíÁ≠âÂºè
sine rule	Ê≠£Âº¶ÂÆöÁêÜ
cosine rule	‰ΩôÂº¶ÂÆöÁêÜ

üìò 6. Calculus (ÂæÆÁßØÂàÜ)
Differentiation (ÂæÆÂàÜ)
derivative	ÂØºÊï∞
differentiate	Ê±ÇÂØº
gradient function	ÂèòÂåñÁéáÂáΩÊï∞
rate of change	ÂèòÂåñÁéá
maximum / minimum	ÊúÄÂ§ßÂÄº / ÊúÄÂ∞èÂÄº
stationary point	È©ªÁÇπ
increasing / decreasing	Â¢ûÂáΩÊï∞ / ÂáèÂáΩÊï∞
Integration (ÁßØÂàÜ)
integral	ÁßØÂàÜ
integrate	ÁßØÂàÜ
definite integral	ÂÆöÁßØÂàÜ
indefinite integral	‰∏çÂÆöÁßØÂàÜ
area under a curve	Êõ≤Á∫ø‰∏ãÈù¢ÁßØ
limits of integration	ÁßØÂàÜ‰∏ä‰∏ãÈôê
constant of integration	Â∏∏Êï∞È°π

üìò 7. Sequences & Series (Êï∞Âàó‰∏éÁ∫ßÊï∞)
sequence	Êï∞Âàó
series	Á∫ßÊï∞
arithmetic sequence	Á≠âÂ∑ÆÊï∞Âàó
geometric sequence	Á≠âÊØîÊï∞Âàó
common difference	ÂÖ¨Â∑Æ
common ratio	ÂÖ¨ÊØî
nth term	Á¨¨ n È°π
sum of n terms	Ââç n È°πÂíå
converge / diverge	Êî∂Êïõ / ÂèëÊï£

üìò 8. Vectors & Matrices (ÂêëÈáè‰∏éÁü©Èòµ)
vector	ÂêëÈáè
magnitude	ÈïøÂ∫¶
direction	ÊñπÂêë
unit vector	Âçï‰ΩçÂêëÈáè
scalar	Ê†áÈáè
dot product	ÁÇπÁßØ
matrix	Áü©Èòµ
determinant	Ë°åÂàóÂºè
inverse matrix	ÈÄÜÁü©Èòµ
identity matrix	Âçï‰ΩçÁü©Èòµ

üìò 9. Probability & Statistics (Ê¶ÇÁéá‰∏éÁªüËÆ°)
Probability (Ê¶ÇÁéá)
experiment	ËØïÈ™å
outcome	ÁªìÊûú
sample space	Ê†∑Êú¨Á©∫Èó¥
event	‰∫ã‰ª∂
probability	Ê¶ÇÁéá
mutually exclusive	‰∫íÊñ•
independent events	Áã¨Á´ã‰∫ã‰ª∂
conditional probability	Êù°‰ª∂Ê¶ÇÁéá
Statistics (ÁªüËÆ°)
data	Êï∞ÊçÆ
dataset	Êï∞ÊçÆÈõÜ
mean	Âπ≥ÂùáÊï∞
median	‰∏≠‰ΩçÊï∞
mode	‰ºóÊï∞
range	ÊûÅÂ∑Æ
variance	ÊñπÂ∑Æ
standard deviation	Ê†áÂáÜÂ∑Æ
histogram	Áõ¥ÊñπÂõæ
frequency table	È¢ëÁéáË°®
scatter graph	Êï£ÁÇπÂõæ
correlation	Áõ∏ÂÖ≥ÊÄß

üìò 10. Proof & Logic Language (ËØÅÊòé‰∏éÈÄªËæëËØç)
assume	ÂÅáËÆæ
suppose	ËÆæ
let ‚Ä¶ be ‚Ä¶	‰ª§‚Ä¶‰∏∫‚Ä¶
given that	Â∑≤Áü•‚Ä¶
therefore / thus	Âõ†Ê≠§
implies	ÊÑèÂë≥ÁùÄ
prove	ËØÅÊòé
conclude	ÂæóÂá∫ÁªìËÆ∫
contradiction	ÂèçËØÅÊ≥ï
necessary condition	ÂøÖË¶ÅÊù°‰ª∂
sufficient condition	ÂÖÖÂàÜÊù°‰ª∂

üìò 11. Exam Command Words (ËÄÉËØïÊåá‰ª§ËØç)
calculate	ËÆ°ÁÆó
find	Ê±Ç
determine	Á°ÆÂÆö
show that	ËØÅÊòé / ÊòæÁ§∫
evaluate	Ê±ÇÂÄº
explain	Ëß£Èáä
state	ÈôàËø∞
justify	ËØÅÊòéÁêÜÁî±
sketch	ÁîªÂá∫ÔºàËøë‰ººÂõæÔºâ
solve	Ëß£

üìò 12. Useful Phrases in Solutions (Ëß£È¢òÂ∏∏Áî®Áü≠ËØ≠)
with respect to	ÂÖ≥‰∫é
substitute into	‰ª£ÂÖ•
expand the brackets	Â±ïÂºÄÊã¨Âè∑
collect like terms	ÂêàÂπ∂ÂêåÁ±ªÈ°π
simplify	ÂåñÁÆÄ
rearrange the equation	ÈáçÊéíÊñπÁ®ã
isolate the variable	‰ΩøÂèòÈáèÁã¨Á´ã
differentiate both sides	‰∏§ËæπÊ±ÇÂØº
integrate with respect to x	ÂØπ x ÁßØÂàÜ
    `.trim();

    // Parse data
    let allTerms = [];
    const lines = rawData.split('\n');
    let currentSection = '';
    for (let line of lines) {
      line = line.trim();
      if (!line) continue;
      if (line.startsWith('üìò')) {
        currentSection = line;
        continue;
      }
      if (line.includes(' (') && !line.includes('\t')) {
        // Subsection like "Differentiation (ÂæÆÂàÜ)" ‚Äì skip
        continue;
      }
      const parts = line.split('\t').filter(p => p.trim() !== '');
      if (parts.length >= 2) {
        // Handle symbol "x" case: English is "x", Chinese is "x"
        let en = parts[0].trim();
        let zh = parts.length > 2 ? parts[2].trim() : parts[1].trim();
        if (en === 'x' && zh === 'x') {
          en = 'x'; zh = 'x';
        }
        allTerms.push({ en, zh });
      }
    }

    console.log("Total terms loaded:", allTerms.length);

    // === GLOBAL STATE ===
    let mode = '';
    let currentIndex = 0;
    let studied = new Set(); // for learning completion
    let quizTerms = [];
    let quizIndex = 0;
    let mistakes = [];
    let correctCount = 0;

    // === DOM ELEMENTS ===
    const homePage = document.getElementById('home');
    const learnPage = document.getElementById('learning');
    const quizPage = document.getElementById('quiz');
    const resultsPage = document.getElementById('results');
    const learnCard = document.getElementById('learnCard');
    const learnProgress = document.getElementById('learnProgress');
    const quizTermEl = document.getElementById('quizTerm');
    const quizOptionsEl = document.getElementById('quizOptions');
    const quizProgress = document.getElementById('quizProgress');

    // === FUNCTIONS ===
    function showPage(id) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function goHome() {
      showPage('home');
    }

    function startMode(m) {
      mode = m;
      if (m === 'learn') {
        studied.clear();
        currentIndex = 0;
        updateLearnCard();
        showPage('learning');
      } else if (m === 'quiz') {
        // Select 30 random unique terms
        const shuffled = [...allTerms].sort(() => 0.5 - Math.random());
        quizTerms = shuffled.slice(0, Math.min(30, allTerms.length));
        quizIndex = 0;
        mistakes = [];
        correctCount = 0;
        nextQuizQuestion();
        showPage('quiz');
      }
    }

    // === LEARNING MODE ===
    function updateLearnCard() {
      const term = allTerms[currentIndex];
      learnCard.textContent = term.en;
      learnCard.dataset.flipped = 'false';
      learnProgress.textContent = `Term ${currentIndex + 1} of ${allTerms.length}`;
    }

    function flipCard() {
      const term = allTerms[currentIndex];
      if (learnCard.dataset.flipped === 'false') {
        learnCard.textContent = term.zh;
        learnCard.dataset.flipped = 'true';
        studied.add(currentIndex);
      } else {
        learnCard.textContent = term.en;
        learnCard.dataset.flipped = 'false';
      }
    }

    function prevCard() {
      if (currentIndex > 0) {
        currentIndex--;
        updateLearnCard();
      }
    }

    function nextCard() {
      if (currentIndex < allTerms.length - 1) {
        currentIndex++;
        updateLearnCard();
      } else {
        // Check if all studied
        if (studied.size === allTerms.length) {
          alert('üéâ You have completed studying all terms!');
          goHome();
        } else {
          alert('Please study all terms before finishing.');
        }
      }
    }

    // === QUIZ MODE ===
    function nextQuizQuestion() {
      if (quizIndex >= quizTerms.length) {
        showResults();
        return;
      }

      const current = quizTerms[quizIndex];
      quizTermEl.textContent = current.en;
      quizProgress.textContent = `Question ${quizIndex + 1} of ${quizTerms.length}`;

      // Get 2 wrong answers (distinct from correct and each other)
      let wrongPool = allTerms.filter(t => t.zh !== current.zh);
      const wrong1 = wrongPool[Math.floor(Math.random() * wrongPool.length)];
      wrongPool = wrongPool.filter(t => t.zh !== wrong1.zh);
      const wrong2 = wrongPool[Math.floor(Math.random() * wrongPool.length)];

      const options = [current.zh, wrong1.zh, wrong2.zh].sort(() => 0.5 - Math.random());

      quizOptionsEl.innerHTML = '';
      options.forEach(opt => {
        const div = document.createElement('div');
        div.className = 'option';
        div.textContent = opt;
        div.onclick = () => selectOption(opt, current.zh);
        quizOptionsEl.appendChild(div);
      });
    }

    function selectOption(selected, correct) {
      const options = document.querySelectorAll('.option');
      let correctChosen = false;

      options.forEach(opt => {
        if (opt.textContent === correct) {
          opt.classList.add('correct');
          if (selected === correct) {
            correctChosen = true;
            correctCount++;
          }
        } else if (opt.textContent === selected) {
          opt.classList.add('wrong');
        }
      });

      if (correctChosen) {
        setTimeout(() => {
          quizIndex++;
          nextQuizQuestion();
        }, 800);
      } else {
        // Record mistake (only once per term)
        if (!mistakes.some(m => m.en === quizTerms[quizIndex].en)) {
          mistakes.push(quizTerms[quizIndex]);
        }
      }
    }

    function showResults() {
      const total = quizTerms.length;
      const accuracy = ((correctCount / total) * 100).toFixed(1);
      document.getElementById('scoreDisplay').textContent = `${correctCount}/${total} (${accuracy}%)`;

      const mistakesList = document.getElementById('mistakesList');
      mistakesList.innerHTML = '';
      if (mistakes.length > 0) {
        document.getElementById('mistakesSection').style.display = 'block';
        mistakes.forEach(m => {
          const li = document.createElement('li');
          li.innerHTML = `<strong>${m.en}</strong> ‚Üí ${m.zh}`;
          mistakesList.appendChild(li);
        });
      } else {
        document.getElementById('mistakesSection').style.display = 'none';
      }

      showPage('results');
    }
  </script>
</body>
</html>